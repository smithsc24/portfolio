"use strict";(self.webpackChunkbasic_portfolio_site=self.webpackChunkbasic_portfolio_site||[]).push([[5271],{71958:(e,t,r)=>{function n(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,r,n,i,s,a,o,l){return[e,t,r,n,i,s,a,o,l]}r.d(t,{fA:()=>i,vt:()=>n,zK:()=>s});const s=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:n,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},75469:(e,t,r)=>{r.d(t,{O:()=>d,W:()=>c});var n=r(6862),i=r(71958),s=r(52165),a=r(68358);const o=(0,r(90646).vt)(),l=(0,i.vt)(),u=(0,i.vt)(),h=(0,i.vt)();function c(e,t,r){return(0,a.s)(o,t[0],t[1],1),(0,a.t)(o,o,(0,n.mg)(l,r)),0===o[2]?(0,s.hZ)(e,o[0],o[1]):(0,s.hZ)(e,o[0]/o[2],o[1]/o[2])}function d(e,t,r){return m(u,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),m(h,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]),(0,n.lw)(e,(0,n.KC)(u,u),h),0!==e[8]&&(e[0]/=e[8],e[1]/=e[8],e[2]/=e[8],e[3]/=e[8],e[4]/=e[8],e[5]/=e[8],e[6]/=e[8],e[7]/=e[8],e[8]/=e[8]),e}function m(e,t,r,i,s,u,h,c,d){(0,n.hZ)(e,t,i,u,r,s,h,1,1,1),(0,a.s)(o,c,d,1),(0,n.KC)(l,e);const[m,f,p]=(0,a.t)(o,o,(0,n.mg)(l,l));return(0,n.hZ)(l,m,0,0,0,f,0,0,0,p),(0,n.lw)(e,l,e)}},50235:(e,t,r)=>{r.d(t,{NH:()=>a,ip:()=>o,sU:()=>u,vG:()=>h});r(27052);var n=r(55678),i=r(92976),s=r(89524);function a(e){const t=l(e);return null!=t?t.toDataURL():""}async function o(e,t){const r=l(e);if(null==r)throw new n.A("imageToArrayBuffer","Unsupported image type");const a=function(e){if(!(e instanceof HTMLImageElement))return"image/png";const t=e.src;if((0,s.DB)(t)){const e=(0,s.r$)(t);return"image/jpeg"===(null===e||void 0===e?void 0:e.mediaType)?e.mediaType:"image/png"}return/\.png$/i.test(t)?"image/png":/\.(jpg|jpeg)$/i.test(t)?"image/jpeg":"image/png"}(e),o=await new Promise((e=>r.toBlob(e,a)));if((0,i.Te)(t),!o)throw new n.A("imageToArrayBuffer","Failed to encode image");const u=await o.arrayBuffer();return(0,i.Te)(t),{data:u,type:a}}function l(e){if(e instanceof HTMLCanvasElement)return e;if(e instanceof HTMLVideoElement)return null;const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");return e instanceof HTMLImageElement?r.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&r.putImageData(e,0,0),t}function u(e){const t=[],r=new Uint8Array(e);for(let n=0;n<r.length;n++)t.push(String.fromCharCode(r[n]));return"data:application/octet-stream;base64,"+btoa(t.join(""))}function h(e){if(e.byteLength<8)return!1;const t=new Uint8Array(e);return 137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}},76184:(e,t,r)=>{r.d(t,{_:()=>c});var n=r(70273),i=r(27907),s=r(67519),a=(r(27052),r(11434),r(11215),r(55292)),o=r(21673),l=r(70190),u=r(23423),h=r(74588);let c=class extends i.A{constructor(e){super(e)}get bounds(){const e=this.coords;return null==(null===e||void 0===e?void 0:e.extent)?null:(0,u.VY)(e.extent)}get coords(){var e;const t=null===(e=this.element.georeference)||void 0===e?void 0:e.coords;return(0,l.projectOrLoad)(t,this.spatialReference).geometry}get normalizedCoords(){return o.A.fromJSON((0,h.jZ)(this.coords))}get normalizedBounds(){const e=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=e?(0,u.VY)(e):null}};(0,n._)([(0,s.MZ)()],c.prototype,"spatialReference",void 0),(0,n._)([(0,s.MZ)()],c.prototype,"element",void 0),(0,n._)([(0,s.MZ)()],c.prototype,"bounds",null),(0,n._)([(0,s.MZ)()],c.prototype,"coords",null),(0,n._)([(0,s.MZ)()],c.prototype,"normalizedCoords",null),(0,n._)([(0,s.MZ)()],c.prototype,"normalizedBounds",null),c=(0,n._)([(0,a.$)("esri.layers.support.MediaElementView")],c)},65550:(e,t,r)=>{r.d(t,{ZH:()=>h});var n=r(82439),i=r(53183),s=(r(50235),r(17674)),a=r(76878);function o(e,t){const{width:r,height:n,getFrame:s}=e,a=e.frameDurations.slice(),o=a.pop();return a.push((0,i.l5)(o+t)),{frameCount:e.frameCount,duration:e.duration+t,frameDurations:a,getFrame:s,width:r,height:n}}class l{constructor(e,t,r,n){this._animation=e,this._repeatType=r,this._onFrameData=n,this._direction=1,this._currentFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let i=0;for(;t>i;)i+=this.timeToFrame,this.nextFrame();const s=this._animation.getFrame(this._currentFrame);this._onFrameData(s)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case s.fu.None:this._currentFrame-=this._direction;break;case s.fu.Loop:this._currentFrame=0;break;case s.fu.Oscillate:this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case s.fu.None:this._currentFrame-=this._direction;break;case s.fu.Loop:this._currentFrame=this._animation.frameDurations.length-1;break;case s.fu.Oscillate:this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame];const e=this._animation.getFrame(this._currentFrame);this._onFrameData(e)}}function u(e,t,r,n){let u,{repeatType:h}=t;if(null==h&&(h=s.fu.Loop),!0===t.reverseAnimation&&(e=function(e){const{width:t,height:r}=e,n=e.frameDurations.reverse();return{frameCount:e.frameCount,duration:e.duration,frameDurations:n,getFrame:t=>{const r=e.frameDurations.length-1-t;return e.getFrame(r)},width:t,height:r}}(e)),null!=t.duration&&(e=function(e,t){const{width:r,height:n,getFrame:s}=e,a=t/e.duration,o=e.frameDurations.map((e=>(0,i.l5)(e*a)));return{frameCount:e.frameCount,duration:e.duration,frameDurations:o,getFrame:s,width:r,height:n}}(e,(0,i.l5)(1e3*t.duration))),null!=t.repeatDelay){const r=1e3*t.repeatDelay;h===s.fu.Loop?e=o(e,(0,i.l5)(r)):h===s.fu.Oscillate&&(e=function(e,t){const{width:r,height:n,getFrame:s}=e,a=e.frameDurations.slice(),o=a.shift();return a.unshift((0,i.l5)(o+t)),{frameCount:e.frameCount,duration:e.duration+t,frameDurations:a,getFrame:s,width:r,height:n}}(o(e,(0,i.l5)(r/2)),(0,i.l5)(r/2)))}if(null!=t.startTimeOffset)u=(0,i.l5)(1e3*t.startTimeOffset);else if(null!=t.randomizeStartTime){const n=82749913,s=null!=t.randomizeStartSeed?t.randomizeStartSeed:n,o=(0,a.J)(r,s);u=(0,i.l5)(o*function(e){return(0,i.l5)(e.frameDurations.reduce(((e,t)=>e+t),0))}(e))}else u=(0,i.l5)(0);return new l(e,u,h,n)}function h(e,t,r,i){const s=null==t.playAnimation||t.playAnimation,a=u(e,t,r,i);let o,l=a.timeToFrame;return function e(){o=s?setTimeout((()=>{a.nextFrame(),l=a.timeToFrame,e()}),l):void 0}(),(0,n.hA)((()=>s&&clearTimeout(o)))}},76878:(e,t,r)=>{r.d(t,{A:()=>s,J:()=>i});var n=r(81883);function i(e,t){let r;if("string"==typeof e)r=(0,n.Wm)(e+"-seed(".concat(t,")"));else{let n=12;r=e^t;do{r=107*(r>>8^r)+n|0}while(0!=--n)}return(1+r/(1<<31))/2}function s(e){return Math.floor(i(e,a)*o)}const a=53290320,o=10},25271:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var n=r(70273),i=(r(77844),r(42494),r(65366),r(59308),r(20989),r(12139),r(69508),r(75234),r(51556),r(42767),r(50906),r(11434)),s=(r(95026),r(80757)),a=(r(27052),r(1121)),o=r(92976),l=r(73896),u=r(67519),h=(r(11215),r(55292)),c=r(23423),d=r(50210),m=r(9444),f=r(76184),p=r(55678),_=(r(37072),r(33980),r(83402),r(57998),r(71915),r(82731),r(76607)),g=(r(4711),r(25770),r(65433),r(21673),r(74795),r(69210),r(38609),r(39002),r(41639),r(22983),r(38810),r(5601),r(20858),r(43436),r(67058),r(41914),r(86469),r(1247),r(44628),r(7143),r(4672),r(80773),r(19380),r(21352),r(45050),r(89786),r(48317),r(8804),r(15599),r(17674)),y=(r(37819),r(95505),r(15616),r(21737),r(13568),r(58644),r(19208),r(37250),r(34429),r(30260),r(58261),r(86291),r(16830),r(84636),r(5719)),v=(r(64761),r(35497),r(84425),r(66549)),w=(r(64721),r(67307),r(37848),r(7206),r(37186),r(43738),r(41536),r(98893),r(51452),r(69124),r(43007),r(25943),r(89524),r(57980),r(17907),r(19931),r(57574),r(31344),r(85789),r(97330),r(37818),r(89932),r(36914),r(50228),r(84520),r(45465),r(48466),r(52476),r(36329),r(67174),r(78676),r(29037),r(63869),r(29936),r(86704),r(14209),r(35859),r(8335),r(47618),r(69329),r(32845),r(28414),r(34614),r(77886),r(56705),r(34204),r(71755),r(37293),r(59587),r(1444),r(5971),r(62767)),T=r(9865),A=r(56271),x=r(55748),C=r(75469),E=r(71958),F=r(52165),V=r(16687),b=r(16964),R=r(65550),D=r(56280),S=r(17743),M=r(74037);const z=[1,1],H=(0,E.vt)(),L={none:g.fu.None,loop:g.fu.Loop,oscillate:g.fu.Oscillate};class q extends b.q{constructor(e){super(),this.elementView=e,this.isWrapAround=!1,this.wrapAroundShift=0,this.perspectiveTransform=(0,V.vt)(),this._playHandle=null,this._vertices=new Float32Array(20),this._handles=[],this._handles.push((0,l.wB)((()=>this.elementView.element.opacity),(e=>this.opacity=e),l.Vh),(0,l.wB)((()=>[this.elementView.coords]),(()=>{this.requestRender()}),l.Vh),(0,l.wB)((()=>["animationOptions"in this.elementView.element&&this.elementView.element.animationOptions]),(()=>{var e;null!==(e=this._playHandle)&&void 0!==e&&e.remove(),this.texture=(0,x.WD)(this.texture),this.requestRender()}),l.Vh),(0,l.z7)((()=>this.elementView.element.loaded),(()=>{const e=this.elementView.element;this.ready(),"video"===e.type&&null!=e.content&&this._handles.push((0,A.on)(e.content,"play",(()=>this.requestRender())))}),l.Vh)),e.element.load().catch((t=>{i.A.getLogger("esri.views.2d.layers.MediaLayerView2D").error(new p.A("element-load-error","Element cannot be displayed",{element:e,error:t}))}))}getMesh(e){throw new Error("Method not implemented.")}destroy(){var e;null!==(e=this._playHandle)&&void 0!==e&&e.remove(),this._handles.forEach((e=>e.remove())),this.texture=(0,x.WD)(this.texture)}get textureSize(){return z}get dvsMat3(){return this.parent.dvsMat3}beforeRender(e){const{context:t}=e,r=this.elementView.element.content;if(null!=r){const e=r instanceof HTMLImageElement,n=r instanceof HTMLVideoElement,i=e?r.naturalWidth:n?r.videoWidth:r.width,s=e?r.naturalHeight:n?r.videoHeight:r.height;if(this._updatePerspectiveTransform(i,s),this.texture)n&&!r.paused&&(this.texture.setData(r),this.requestRender(),this.texture.generateMipmap());else{const e=new S.R;if(e.wrapMode=y.pF.CLAMP_TO_EDGE,e.preMultiplyAlpha=!0,e.width=i,e.height=s,"getFrame"in r){const n=r=>{this.texture?this.texture.setData(r):this.texture=new v.g(t,e,r),this.requestRender()};"animationOptions"in this.elementView.element&&(this._playHandle=(0,R.ZH)(r,function(e){return e?{...e,playAnimation:e.playing,repeatType:e.repeatType?L[e.repeatType]:void 0}:{}}(this.elementView.element.animationOptions),null,n))}else this.texture=new v.g(t,e,r);this.texture.generateMipmap(),n&&!r.paused&&this.requestRender()}}super.beforeRender(e)}_createTransforms(){return null}draw(e){e.drawArrays(y.WR.TRIANGLE_STRIP,0,4)}updateDrawCoords(e,t,r,n){const{coords:i,bounds:s}=this.elementView;if(null==i||null==s)return;const[a,o,l,u]=i.rings[0],h=this._vertices,{x:c,y:d}=e;h.set([o[0]-c,o[1]-d,a[0]-c,a[1]-d,l[0]-c,l[1]-d,u[0]-c,u[1]-d]);let m=t;if(n){const[e,,t]=s,{worldWidth:r,xBounds:i}=n,[a,o]=i;e<a&&t>a?m=r:t>o&&e<o&&(m=-r)}this.wrapAroundShift=m,this.isWrapAround=0!==m}getVAO(e,t,r){if(null==this.elementView.coords)return null;const n=this._vertices;if(this._vao)this._geometryVbo.setData(n);else{this._geometryVbo=D.g.createVertex(e,y._U.DYNAMIC_DRAW,n);const i=D.g.createVertex(e,y._U.STATIC_DRAW,new Uint16Array([0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,1,1,0,1,1]));this._vao=new M.Z(e,r,t,{geometry:this._geometryVbo,tex:i})}return this._vao}_updatePerspectiveTransform(e,t){const r=this._vertices;(0,C.O)(H,[0,0,e,0,0,t,e,t],[r[0],r[1],r[4],r[5],r[2],r[3],r[6],r[7]]),(0,F.hZ)(this.perspectiveTransform,H[6]/H[8]*e,H[7]/H[8]*t)}}var O=r(56812),U=r(51163),Z=r(17302);let j=class extends((0,U.e)(Z.A)){constructor(){super(...arguments),this._overlayContainer=null,this._fetchQueue=null,this._tileStrategy=null,this._elementReferences=new Map,this._debugGraphicsView=null,this.layer=null,this.elements=new s.A}attach(){this.addAttachHandles([(0,l.on)((()=>this.layer.effectiveSource),"refresh",(()=>{this._tileStrategy.refresh((e=>this._updateTile(e))),this.requestUpdate()})),(0,l.on)((()=>this.layer.effectiveSource),"change",(e=>{let{element:t}=e;return this._elementUpdateHandler(t)}))]),this._overlayContainer=new O.A,this.container.addChild(this._overlayContainer),this._fetchQueue=new w.A({tileInfoView:this.view.featuresTilingScheme,concurrency:10,process:(e,t)=>this._queryElements(e,t)}),this._tileStrategy=new T.A({cachePolicy:"purge",resampling:!0,acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme}),this.requestUpdate()}detach(){var e;this.elements.removeAll(),this._tileStrategy.destroy(),this._fetchQueue.destroy(),this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this._elementReferences.clear(),null===(e=this._debugGraphicsView)||void 0===e||e.destroy()}supportsSpatialReference(e){return!0}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}update(e){var t;this._tileStrategy.update(e),null===(t=this._debugGraphicsView)||void 0===t||t.update(e)}async hitTest(e,t){const r=[],n=e.normalize(),i=[n.x,n.y];for(const{projectedElement:{normalizedCoords:s,element:a}}of this._elementReferences.values())null!=s&&(0,d.t1)(s.rings,i)&&r.push({type:"media",element:a,layer:this.layer,mapPoint:e,sourcePoint:a.toSource(e)});return r.reverse()}canResume(){return null!=this.layer.source&&super.canResume()}async doRefresh(){this._fetchQueue.reset(),this._tileStrategy.refresh((e=>this._updateTile(e)))}_acquireTile(e){const t=new k(e.clone());return this._updateTile(t),t}_updateTile(e){this._updatingHandles.addPromise(this._fetchQueue.push(e.key).then((t=>{const[r,n]=e.setElements(t);this._referenceElements(e,r),this._dereferenceElements(e,n),this.requestUpdate()}),(e=>{(0,o.zf)(e)||i.A.getLogger(this).error(e)})))}_releaseTile(e){this._fetchQueue.abort(e.key.id),e.elements&&this._dereferenceElements(e,e.elements),this.requestUpdate()}async _queryElements(e,t){const r=this.layer.effectiveSource;if(null==r)return[];this.view.featuresTilingScheme.getTileBounds(G,e,!0);const n=new _.A({xmin:G[0],ymin:G[1],xmax:G[2],ymax:G[3],spatialReference:this.view.spatialReference});return r.queryElements(n,t)}_referenceElements(e,t){if(null!=this.layer.source)for(const r of t)this._referenceElement(e,r)}_referenceElement(e,t){(0,a.tE)(this._elementReferences,t.uid,(()=>{const e=new f._({element:t,spatialReference:this.view.spatialReference}),r=new q(e);this._overlayContainer.addChild(r),this.elements.add(t);return{tiles:new Set,projectedElement:e,overlay:r,debugGraphic:null}})).tiles.add(e)}_dereferenceElements(e,t){for(const r of t)this._dereferenceElement(e,r)}_dereferenceElement(e,t){var r;const n=this._elementReferences.get(t.uid);n.tiles.delete(e),n.tiles.size||(this._overlayContainer.removeChild(n.overlay),n.overlay.destroy(),n.projectedElement.destroy(),this._elementReferences.delete(t.uid),this.elements.remove(t),null===(r=this._debugGraphicsView)||void 0===r||r.graphics.remove(n.debugGraphic))}_elementUpdateHandler(e){let t=this._elementReferences.get(e.uid);if(t){var r,n;const i=t.projectedElement.normalizedCoords;if(null==i)return this._overlayContainer.removeChild(t.overlay),t.overlay.destroy(),t.projectedElement.destroy(),this._elementReferences.delete(e.uid),this.elements.remove(e),void(null===(r=this._debugGraphicsView)||void 0===r||r.graphics.remove(t.debugGraphic));const s=[],a=[];for(const e of this._tileStrategy.tiles){const r=B(this.view.featuresTilingScheme,e,i);t.tiles.has(e)?r||a.push(e):r&&s.push(e)}for(const t of s)this._referenceElement(t,e);for(const t of a)this._dereferenceElement(t,e);return t=this._elementReferences.get(e.uid),void((null===(n=t)||void 0===n?void 0:n.debugGraphic)&&(t.debugGraphic.geometry=t.projectedElement.normalizedCoords,this._debugGraphicsView.graphicUpdateHandler({graphic:t.debugGraphic,property:"geometry"})))}const i=new f._({element:e,spatialReference:this.view.spatialReference}).normalizedCoords;if(null!=i)for(const s of this._tileStrategy.tiles)B(this.view.featuresTilingScheme,s,i)&&this._referenceElement(s,e)}};(0,n._)([(0,u.MZ)()],j.prototype,"layer",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],j.prototype,"elements",void 0),j=(0,n._)([(0,h.$)("esri.views.2d.layers.MediaLayerView2D")],j);const G=(0,c.vt)(),I={xmin:0,ymin:0,xmax:0,ymax:0};function B(e,t,r){return e.getTileBounds(G,t.key,!0),I.xmin=G[0],I.ymin=G[1],I.xmax=G[2],I.ymax=G[3],(0,m.fA)(I,r)}class k{constructor(e){this.key=e,this.elements=null,this.isReady=!1,this.visible=!0}setElements(e){const t=[],r=new Set(this.elements);this.elements=e;for(const n of e)r.has(n)?r.delete(n):t.push(n);return this.isReady=!0,[t,Array.from(r)]}destroy(){}}const W=j}}]);
//# sourceMappingURL=5271.d13a7459.chunk.js.map